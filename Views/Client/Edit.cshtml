@model IMS_WebApplication.Models.Client

@{
    ViewData["Title"] = "Edit";
    Layout = "_MyLayout";
}

<style>
    .message {
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
    }

    .success {
        background-color: #d4edda;
        border-color: #c3e6cb;
        color: #155724;
    }

    .error {
        background-color: #f8d7da;
        border-color: #f5c6cb;
        color: #721c24;
    }
</style>

<h2 class="text-center" style="color:#FA67AB;">Edit Client Details</h2>


<hr />
<div class="row justify-content-center">
    <div class="col-md-6 text-lg-start">
        @{
            string responseClass = TempData["ResponseClass"] as string;
            string responseMessage = TempData["Response"] as string;
        }

        @if (!string.IsNullOrEmpty(responseMessage))
        {
            <div class="message @responseClass">
                @responseMessage
            </div>
        }
        <form asp-action="Edit">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="ClientId" />
            
            <div class="form-group">
                <label asp-for="ClientId" class="control-label"></label>
                <input asp-for="ClientId" class="form-control" />
                <span asp-validation-for="ClientId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="FirstName" class="control-label"></label>
                <input asp-for="FirstName" class="form-control" />
                <span asp-validation-for="FirstName" class="text-danger"></span>
                <span id="firstNameValidation" class="text-danger" style="display: none;">First Name cannot contain integers.</span>
            </div>
            <div class="form-group">
                <label asp-for="LastName" class="control-label"></label>
                <input asp-for="LastName" class="form-control" />
                <span asp-validation-for="LastName" class="text-danger"></span>
                <span id="lastNameValidation" class="text-danger" style="display: none;">Last Name cannot contain integers.</span>
            </div>
            <div class="form-group">
                <label asp-for="Email" class="control-label"></label>
                <input asp-for="Email" class="form-control" />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PhoneNumber" class="control-label"></label>
                <input asp-for="PhoneNumber" class="form-control" />
                <span asp-validation-for="PhoneNumber" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="City" class="control-label"></label>
                <select asp-for="City" class="form-control">
                    <option value="Select">Select</option>
                    <option value="Ariyalur">Ariyalur</option>
                    <option value="Banglore">Banglore</option>
                    <option value="Chennai">Chennai</option>
                    <option value="Geneva">Geneva</option>                   
                    <option value="Mombasa">Mombasa</option>
                    <option value="Muscat">Muscat</option>
                    <option value="Namakkal">Namakkal</option>
                    <option value="NewYark">NewYark</option>
                    <option value="Osh">Osh</option>
                    <option value="Patna">Patna</option>
                    <option value="Tenkasi">Tenkasi</option>
                    <option value="Theni">Theni</option>
                    <option value="Toronto">Toronto</option>
                    <option value="Trichy">Trichy</option>
                    <option value="Tuticorin">Tuticorin</option>
                    <option value="NewYark">NewYark</option>
                </select>
                <span asp-validation-for="City" class="text-danger"></span>
            </div>
           
            <div class="form-group">
                <label asp-for="State" class="control-label"></label>
                    <select asp-for="State" class="form-control">
                    <option value="Select">Select</option>
                    <option value="AndhraPradesh">AndhraPradesh</option>
                    <option value="Alaska">Alaska</option>
                    <option value="Assam">Assam</option>
                    <option value="Bihar">Bihar</option>
                    <option value="California">California</option>
                    <option value="Florida">Florida</option>
                    <option value="Hawali">Hawali</option>
                    <option value="TamilNadu">TamilNadu</option>
                    <option value="Karnataka">Karnataka</option>
                    <option value="Michigan">Michigan</option>
                    <option value="Nairobi">Nairobi</option>                   
                    <option value="Oman">Oman</option>
                    <option value="Russia">Russia</option>
                    <option value="Texas">Texas</option>
                    <option value="Wahington">Washington</option>
                    <option value="NewYark">NewYark</option>
                </select>
                <span asp-validation-for="State" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PanCardNo" class="control-label"></label>
                <input asp-for="PanCardNo" class="form-control" />
                <span asp-validation-for="PanCardNo" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Gender</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="male" name="gender" value="Male" required>
                    <label class="form-check-label" for="male">Male</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="female" name="gender" value="Female" required>
                    <label class="form-check-label" for="female">Female</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="other" name="gender" value="Other" required>
                    <label class="form-check-label" for="other">Other</label>
                </div>
                <span asp-validation-for="Gender" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Age" class="control-label"></label>
                <input asp-for="Age" class="form-control" />
                <span asp-validation-for="Age" class="text-danger"></span>
                <span id="ageValidationMessage" class="text-danger" style="display: none;">Please enter a valid age.</span>
            </div>

            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>
<div class="col-md-6 text-center">
    <a asp-action="ClientList">Back to List</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

<script>
function validateForm() {
    var isValid = true;

    // Validate city dropdown
    var cityDropdown = document.querySelector('select[name="city"]');
    if (cityDropdown.value === 'Select') {
        isValid = false;
        document.querySelector('span[data-valmsg-for="City"]').innerText = 'City is required';
    } else {
        document.querySelector('span[data-valmsg-for="City"]').innerText = '';
    }

    // Validate state dropdown
    var stateDropdown = document.querySelector('select[name="state"]');
    if (stateDropdown.value === 'Select') {
        isValid = false;
        document.querySelector('span[data-valmsg-for="State"]').innerText = 'State is required';
    } else {
        document.querySelector('span[data-valmsg-for="State"]').innerText = '';
    }

    // Validate other fields
    var firstName = document.querySelector('input[name="FirstName"]').value.trim();
    var lastName = document.querySelector('input[name="LastName"]').value.trim();
    var email = document.querySelector('input[name="Email"]').value.trim();
    var phoneNumber = document.querySelector('input[name="PhoneNumber"]').value.trim();
    var panCardNo = document.querySelector('input[name="PanCardNo"]').value.trim();
    var age = document.querySelector('input[name="Age"]').value.trim();

    if (firstName === '') {
        isValid = false;
        document.querySelector('span[data-valmsg-for="FirstName"]').innerText = 'First Name is required';
    } else {
        document.querySelector('span[data-valmsg-for="FirstName"]').innerText = '';
    }

    if (lastName === '') {
        isValid = false;
        document.querySelector('span[data-valmsg-for="LastName"]').innerText = 'Last Name is required';
    } else {
        document.querySelector('span[data-valmsg-for="LastName"]').innerText = '';
    }

    if (email === '') {
        isValid = false;
        document.querySelector('span[data-valmsg-for="Email"]').innerText = 'Email is required';
    } else {
        document.querySelector('span[data-valmsg-for="Email"]').innerText = '';
    }

    if (phoneNumber === '') {
        isValid = false;
        document.querySelector('span[data-valmsg-for="PhoneNumber"]').innerText = 'Phone Number is required';
    } else {
        document.querySelector('span[data-valmsg-for="PhoneNumber"]').innerText = '';
    }

    if (panCardNo === '') {
        isValid = false;
        document.querySelector('span[data-valmsg-for="PanCardNo"]').innerText = 'PAN Card No is required';
    } else {
        document.querySelector('span[data-valmsg-for="PanCardNo"]').innerText = '';
    }

    var genderInputs = document.querySelectorAll('input[name="gender"]');
    var genderSelected = false;
    genderInputs.forEach(function(input) {
        if (input.checked) {
            genderSelected = true;
        }
    });

    if (!genderSelected) {
        isValid = false;
        document.querySelector('span[data-valmsg-for="Gender"]').innerText = 'Gender is required';
    } else {
        document.querySelector('span[data-valmsg-for="Gender"]').innerText = '';
    }


    if (age === '') {
        isValid = false;
        document.querySelector('span[data-valmsg-for="Age"]').innerText = 'Age is required';
    } else {
        document.querySelector('span[data-valmsg-for="Age"]').innerText = '';
    }

    return isValid;
}
</script>